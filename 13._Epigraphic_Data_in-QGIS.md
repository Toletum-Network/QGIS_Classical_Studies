[Previous Module: Spatial Analyses](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/12.%20Module:_Site_Catchment.md#12-site-catchment)


# 13. Epigraphic Data in QGIS

[Exercise data and Additional eductional material](https://drive.google.com/drive/folders/1T8gJAiNYTXrsWkUwT6pxyY8fJTVnYyNy?usp=sharing)

This section is created by [Pieter Houten](https://orcid.org/my-orcid?orcid=0000-0002-7872-782X) for the Summer Course [De la piedra a tu pantalla](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/6e620c8c056454c908a899416d2eb0c27e007521/Summer%20course%20De%20la%20piedra%20a%20tu%20pantalla.pdf) in Zaragoza. The section is a basic instruction to map and analyse epigraphic data. As such the page holds basic insctructions treated in more detail in other modules. For the more detailed inscructions follow the links to the main course. If you are new to QGIS it might be best to quickly review [Module 2](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/2.%20Module:_The_Interface.md#2-module-the-interface) to get an idea of the interface.

**``! Note``** 
The [QGIS Online Course for Classical Studies](https://github.com/Toletum-Network/QGIS_Classical_Studies#qgis-online-course-for-classical-studies) uses 3.16 LTR screenshots. We will be using the QGIS 3.22 LTR ([Download here](https://qgis.org/en/site/forusers/download.html#)) which might have a slightly different User Interface (UI).

The the project file in our drive is set to the Portuguese Coordinate Reference System: EPSG: 3763 ERTS89/ Portugal TM06.
It is advised to download all the data from the Drive and save it on your local drive. Files in the could tend to get corrupted due to network failures.

## 13.1. Epigraphic Data

For our epigraphic data we resort to the publications in corpora and journals or to the epigraphic databases. In the past years we have seen a rise in databases providing different (sub)sets of epigraphy. Each of these has their own focus and thereby also pitfalls. One of the major problems of the epigraphic datasets is the limited spatial information. Often databases chose to select a (modern) place to represnt all epigraphy of a specific region (e.g. the modern capital for all epigraphy of the municipality). This decision might be toavoid the problems we encounter when we start entering findspots: are these the primary location of the inscription, or was it found in a secondary location? despite these issues we can gather information from the datasets and where needed improve spatial information.

The databases we will turn to for our course are:

* [Hispania Epigraphica](http://eda-bea.es/)
* [Epigraphik-Datenbank Clauss/Slaby](https://db.edcs.eu/epigr/epi.php?s_sprache=en)
* [Epigraphic Database Heidelberg](https://edh.ub.uni-heidelberg.de/)
* [Trismegistos](https://www.trismegistos.org/)

Much of the data we will be using has been curated within the ERC-Project [LatinNow](latinnow.eu), which aims at publishing its [LatinNow database](https://latinnow.eu/online-resources-2/databases-and-data/) in September 2022, and the ANR/DFG-project [ATLAS](http://atlas-cities.com/) and its work-in-progress [Huma-Num database](https://geoapps.huma-num.fr/adws/app/5b1c0f10-7386-11ec-b348-11e51a07f6b0/).

**The goal for this lesson:** Understanding and using epigraphic data for spatial analysis.

**``! Note``** 
We will use the epigraphic data on the Conventus Pacensis. This data is digitally obtained via Clauss-Slaby and improved using the publications by d'Encarnação *IRCP* and *IRCP 25 anos depois*.

## 13.2 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Starting our map
Open the project file [*Pacensis_NAME.qgz*]().

### 13.2.1 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Base layer
When we have the project open we should have:
* Base Layer: a raster from the Consortium of Ancient World Mappers ([CAWM](http://cawm.lib.uiowa.edu/index.html))

A base layer helps us to find our bearing within the project. depending on the type of base layer we can obtain infomation. For instance the geography, as in our case. The base layer we are using is a WMTS (Web Map Tile Service), this is an online layer composed of tiles. You will notice that when we zoom in and out the map will slowly fill the tiles. This type has the advantage that we don't have to save a large file. However, when we find ourselves without an internet connection, we will not have a base layer.

### 13.2.2 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Adding vector data
Besides a neat base layer we need some other data to work with. Before adding the epigraphy we will add some more data. All this data is in vector shape. To understand more about Vector data you can review Modules [4](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/4.%20Module:%20Classifying%20Vector%20Data.md), [6](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/6.%20Module:%20Creating%20Vector%20Data.md) and [7](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/7.%20Module:%20Vector%20Analysis.md).
There are three main types of vector data:
* Point
* Line 
* Polygon

These correspond to the data we will be uploading
* Settlements
* Roads 
* Territories

Let's add the first layers. The **``Data Source Manager``** dialog allows you to choose the data to load depending on the data type. We’ll use it to load our dataset: click the ![Data Source Manager](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/Open%20Data%20Source%20Manager.png) **``Open Data Source Manager``** button.

If you can’t find the icon, check that the **``Data Source Manager``** toolbar is enabled in the **``View ‣ Toolbars``** menu.

![2.1.1 B Toolbar](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20B%20Toolbar.png)

Load the _**Pacensis_Settlements.shp**_ vector dataset:
* Click on the **``Vector``** tab.
* Enable the ![radiobutton](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/radiobuttonon.png) **``File``** source type.
* Press the **``…``** button next to **``Vector Dataset(s)``**.
* Select the _**Pacensis_Settlements.shp**_ file in your directory with the files for the course.
* Click **``Open``**. You will see the original dialog, with the local file path filled in.

![2.1.1 C browser vector data](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20C%20browser%20vector%20data.png)

* Ignore the **``Options``** fields.
* Click **``Add``** here as well. The data you specified will now load: you can see a _**Pacensis_Settlements.shp**_ item in the **Layers panel** (bottom left) with its features shown in the main map canvas.
* Close the **``Data Source Manager``** dialog

Congratulations! You now have a basic map. Now would be a good time to save your work.

### 13.2.3 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Try Yourself
Repeat the steps above to add the _**Pacensis_Roads.shp**_ and _**Pacensis_Territories.shp**_ layers from the same folder to the map. You can order your layers in the Layer Panel by dragging them: left click the layer you want to move, hold and drag up or down. If the CAWM layer covers your other layers, drag it to the lowest postion in the Layers Panel


## 13.3 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Working with Vector Data
All these layers are in a very simple layout. Depending on the layer order (ideally we have Point layer, line layer, polygon layer and last base layer) we can see the different layers. But there is no differentation in the points and lines. Since our datasets have attributes ([more on attributes](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/3.%20Module:_Creating_a_Basic_Map.md#311--follow-along-viewing-layer-attributes)) we can actegorize our data.

### 13.3.1 Polygon Data
We will start with the Polygon data, or our territories. These are based on a 6 hour walking distance from the centres of self-governing communities of Pacensis (Houten 2021). 
We will start with the roads. When we right click the layer _**Territories**_ we can open the **`Properties`**. Then **`Symbology`**. Here we can start creating a new way of displaying the layer. 
We have multiple options:
* No Symbols
* Single symbol (this is current)
* Categorized
* Graduated
* Rule-based
* Merged Features
* Inverted Polygons
* 2.5 D

We will select Single Symbol (should be default). Our polygons are now with a fill, which hides the base layer. As we want to see the base layer we are going to change the fill. 
Click *Simple Fill*. You will see the 'Fill color'. By clicking the small arrow on the right of the bar with the Fill color we can check the box for *Transparent Fill*

![image](https://user-images.githubusercontent.com/66669249/175313712-2e26ca21-d0b7-42ee-ad47-6b80e46e039e.png)

Next we want the outline of our territories to be a less strong and follow a dotted pattern. We set the *Stroke Width* to _`0.20`_ and the *Stroke Style* to 'Dot Line'.
Now we can see our base layer and have the territories less prominent on our map. 

### 13.3.2 Line Data
Next up are the roads. When we right click the layer _**Roads**_ we can open the **`Properties`** again. We follow through until we see the options of **`Symbology`**:
* No Symbols
* Single symbol (this is current)
* Categorized
* Graduated
* Rule-based
* Merged Features
* Embedded Symbols

We see that there are some differences with the polygon layer. This has to do with the different nature of the datatype. It is important to consider your data and what you want to do with it before deciding on what type of vector layer you are using. Let's continue with changing the symbology of our layer.

We will use the categorized. Under value we choose *LAYER* and the Symbol will be a simple line (should be default). Then we click **``Classify``** on the bottom left. 
Now we have _Main Road_,  _Secondary Road_ and _all other values_. Double click the line symbol before Main Road to get the Symbol Selector pane.

![image](https://user-images.githubusercontent.com/66669249/175317210-c5e8108e-1735-452b-abc9-520493069551.png)

Your pane will have one line. Change the *Color* of this line to white and *Stroke With* to _`0.2`_. Click the green + to add another line below the white line. Change the *Color* of this new line to black and *Stroke With* to _`0.4`_. Click **``OK``**.
Change the Secondary Road *Color* to black and *Stroke With* to _`0.15`_.
Now we have a map with a clear differentation between the types of roads. Moreover, on the left hand pane we can now see that the Layers panel has the option to deselect the types. If we want we can create a map with only the Main Roads.

### 13.3.3 Point Data
Lastly we will turn to the most complicated dataset. Lat us first get an idea of our data. Right click 

Next we will do something more complicated: we will diffrentiate the settlements layer. Here we have to select categorized again and then use "Type" for value. When we 
click "Classify we will see that several values have more than one entry. Sometimes we find that data is not entered as we would like to see.
However, we can solve this issue rather simply with another way of working with symbology: Rule-based.
When





Now we have a basic map of Pacensis and we can [upload the shapefile](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/2.%20Module:_The_Interface.md#211--follow-along-prepare-a-map) with the inscriptions from the conventus Pacensis.




For a catchment analysis of our settlements, we will need the following layers: _**L12_AnArqAnd_SurveyAlmanzora.shp**_, _**L12_BTN25_RiversAlmanzora.shp**_, _**L12_CLC_LanduseAlmanzora.shp**_. As you learned within the additional material, there are different ways of performing such an analysis. We will use the simple way of calculating an area of 2km surrounding each settlement. 
Therefore open **``Vector ‣ Geoprocessing Tools ‣ Buffer``** and choose _**L12_AnArqAnd_SurveyAlmanzora.shp**_ as **`Input layer`**, a **`Distance`** of _`2.0`_ (and don’t forget to set the scale to **`kilometers`**!) and **`Segments`** to _`20`_. Your result should look something like this:

![12.1.1 A Buffer](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/12.1.1%20A%20Buffer.png)

### 12.1.2. ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Refine catchment area
Now we want to subtract rivers from our estimated territories, because these are not useable for agriculture. To do that, use **``Vector ‣ Geoprocessing Tools ‣ Difference``** and choose your temporary _**Buffered layer**_ as **`Input layer`** and _**L12_BTN25_RiversAlmanzora.shp**_ as **`Overlay layer`**. 

**``! Note``** You will notice that _**L12_BTN25_RiversAlmanzora.shp**_ is a polygonal layer, in contrast to the earlier line layers we used for rivers before. To calculate the surface area of a river we need it to be polygonal rather than line data. When creating a new layer we have to consider the purpose.

**``! Note``** The process might take a while, depending of your computer's speed. 
