# Introdução: primeiro mapa

[Arquivos para o módulo](https://github.com/Toletum-Network/QGIS_Classical_Studies/tree/c23914c627a665fafad9ae6e896c60682078229a/M%C3%A9todos_espaciais_para_os_visigodos/Data/Introdu%C3%A7%C3%A3o)

A primeira aula vai apresentar a interface do QGIS. Certifique-se de ter instalado o programa e baixado os dados necessários antes do início do curso. Se não tiver experiência com _Sistemas de Informação Geográfica_ (SIG o GIS _Graphical Information Systems_), sugerimos que observe bem a interface do programa. Um guia detalhado pode ser encontrado no [Segundo Módulo](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/2.%20Module_PT) do curso [QGIS for Classical Studies](https://github.com/Toletum-Network/QGIS_Classical_Studies#qgis-online-course-for-classical-studies) (em inglês).

A primeira sessão on-line começará com uma breve introdução ao curso. Em seguida, começaremos a criar nossos primeiros mapas adicionando dados geoespaciais ao projeto GIS. A partir daí, começaremos a criar os primeiros mapas.

## Plano de aula

| **Hora**         |   **Tema**   |
|:--------------|:-----------|
| 9.00 - 9.30 | [Introdução e interface](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_PT.md#11-introdu%C3%A7%C3%A3o-e-interface) |
| 9.30 - 9.45 | Perguntas |
| 9.45 - 10.15 | [Dados no QGIS](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_PT.md#12-dados-no-qgis)|
| 10.15 - 10.30 | **Pausa** | 
| 10.30 - 11.00 | [Simbologia](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_PT.md#13-simbologia) |
| 11.00 - 11.45 | [Primeiro mapa](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_PT.md#14-primeiro-mapa)|
| 11.45 - 12.00 | Perguntas |

[Powerpoint]()

## 1.1 Introdução e interface
Um GIS nos permite visualizar dados espaciais, ou seja, informação que têm uma posição em um plano. Isso pode ser no mundo "real", usando coordenadas existentes que podem ser colocadas no GIS em seus locais. Entretanto, também podemos mapear dados em referência uns aos outros. Dessa forma, é possível mapear elementos em seu próprio sistema de coordenadas fictício com base em sua própria posição relativa. Por exemplo, podemos usar as coordenadas de Ptolomeu para criar seus mapas no QGIS.


### Tarefa ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) CRS
Abra um novo projeto com o CRS EPSG:4326, também chamado de WGS84.
<br>Na barra inferior você verá “Coordinate”; digite 'world' no campo “Coordinate” e pressione Enter. Agora você verá o mundo no CSR WGS84. 
![Add world map](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/World%20WGS84.jpg)
<br>
No canto inferior direito podemos trocar o EPSG. Vamos trocá-lo por uma outra visão familiar: EPSG 3857, o WebMercator.
![Change EPSG](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/ChangeEPSG.jpg)
<br>
Essa projeção é frequentemente utilizada em mapas baseados na web, como o Google. Tais projeções são cilíndricas e têm o problema de que tendem a exagerar áreas distantes do Equador:
<br>
<img src=https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/Worlds_animate.gif width=400 height=400>
<br>
Para representar o plano em que estamos trabalhando da forma mais precisa possível, usaremos uma projeção local, a ERTS89/UTM 30N. Essa projeção torna a Península Ibérica muito precisa. Entretanto, quando vemos o mundo inteiro, podemos observar o problema das projeções. Outro benefício dessa projeção é o fato de ela usar o sistema métrico, em vez de graus. Isso será importante quando começarmos a fazer buffers e calcular áreas e distâncias.
<br>
Para mais informações, vide a seção sobre projeções e CRS na [QGIS Gentle Introduction](https://docs.qgis.org/3.28/en/docs/gentle_gis_introduction/coordinate_reference_systems.html) (em inglês). 

## 1.2 Dados no QGIS
Já adicionamos a primeira parte dos dados ao nosso mapa, acrescentando o layout do mundo. Esse mapa-múndi que acabamos de adicionar é um mapa vetorial.

### 1.2.1 Dados vetoriais
Os dados vetoriais são um dos tipos de dados fundamentais usados nos _Sistemas de Informações Geográficas_ (SIG). Eles representam informações espaciais usando formas geométricas específicas, como pontos, linhas e polígonos, juntamente com atributos associados. Os dados vetoriais são adequados para representar recursos que têm limites distintos e podem ser descritos com coordenadas específicas.
<br>
Os dados vetoriais são versáteis e podem representar relações espaciais complexas e topologias com precisão. Eles permitem a modelagem precisa de recursos e suportam vários tipos de análise espacial, como buffering, sobreposição e análise de rede. Entretanto, os dados vetoriais podem se tornar bastante densos e exigir muito da memória do computador ao lidar com conjuntos de dados extensos ou imagens de alta resolução. Para entender mais sobre dados vetoriais, você pode consultar os Módulos [4](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/4.%20Module:%20Classifying%20Vector%20Data.md), [6](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/6.%20Module:%20Creating%20Vector%20Data.md) e [7](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/7.%20Module:%20Vector%20Analysis.md) (em inglês). <br>

Existem três tipos principais de dados vetoriais:

#### Dados de Ponto (_Point data_)
Os pontos representam localizações individuais no espaço e são definidos por um único par de coordenadas ao longo dos eixos X e Y, ou latitude e longitude. Além disso, plotamos dados de pontos ao longo de um eixo Z, dando a eles um valor de altura ou profundidade. Além das coordenadas, os dados de pontos podem conter atributos. Os pontos podem ser usados para representar recursos como cidades, pontos de referência ou locais de amostragem.
<br>
Em nosso caso, trabalharemos com os concílios eclesiásticos do período visigótico. Podemos registrar os anos em que os locais foram representados nos concílios. Além disso, podemos acrescentar outros elementos de nosso interesse, como demografia, tamanho, tipo etc.

#### Dados de Linha (_Line data_)
O segundo tipo de dados vetoriais são os dados de linha. Em princípio, as linhas são sequências de pontos conectados que representam recursos lineares, como estradas, rios ou trilhas. Elas também podem ser usadas para representar recursos não lineares, definindo uma série de segmentos de linha conectados.

#### Dados de Polígono (_Polygon data_)
Os polígonos são formas fechadas formadas pela conexão de vários pontos para criar uma área fechada. Eles são usados para representar recursos como parcelas de terra, lagos, países e limites administrativos.
<br>
Sempre que começamos a trabalhar com dados, precisamos considerar com que tipo de dados e em que escala estamos lidando - uma cidade pode ser um ponto ou um (número de) polígono(s). Por exemplo, quando trabalhamos na escala de toda a Península Ibérica, talvez queiramos que as cidades sejam renderizadas como pontos com atributos. No entanto, ao trabalhar em uma região menor, talvez queiramos renderizar a cidade como um polígono, indicando a área que a cidade ocupa em seu território. Ou podemos decidir criar polígonos para distritos ou até mesmo para edifícios individuais.
<br>
Da mesma forma, podemos querer selecionar entre dados de polígono ou de linha. No nosso caso, devemos considerar, por exemplo, o uso de províncias como dados de linha ou de polígono. Para a cartografia, talvez queiramos usar dados de linha, pois eles indicam o limite entre duas províncias. No entanto, se quisermos usar o GIS para selecionar recursos em uma província ou calcular a área de uma província, precisaremos optar por um polígono.

### 1.2.2 Dados _Raster_
Os dados raster são outro tipo de dados fundamental usado nos _Sistemas de Informações Geográficas_ (SIG) juntamente com os dados vetoriais. Diferentemente dos dados vetoriais, que representam características geográficas usando formas geométricas específicas, os dados raster representam informações espaciais como uma grade de células ou pixels. Cada célula da grade contém um valor que representa um atributo ou uma medida específica para aquele local na superfície da Terra.

Características-chave dos dados raster no GIS incluem:

_Estrutura em Grade_: Os dados raster são organizados em um formato de grade, em que cada célula, também conhecida como pixel, corresponde a uma localização geográfica específica. O tamanho das células determina o nível de detalhe do conjunto de dados. Células menores resultam em maior resolução, mas podem levar a tamanhos de dados maiores.

_Valores de Célula_: Cada célula da grade matricial contém um valor que representa um atributo específico. Esse atributo pode variar muito, dependendo da aplicação. Por exemplo, um conjunto de dados raster pode representar valores de elevação, leituras de temperatura, categorias de cobertura de terra ou valores de intensidade de imagens de satélite.

_Superfícies Contínuas_: Os dados raster são adequados para representar superfícies contínuas ou fenômenos que mudam gradualmente no espaço, como elevação, temperatura e precipitação. A estrutura de grade permite capturar variações no espaço.

_Análise Espacial_: Os dados raster são comumente usados para tarefas de análise espacial, como interpolação, modelagem de adequação e análise de superfície. As operações analíticas podem ser realizadas avaliando os valores das células vizinhas.


A resolução dos dados raster afeta o nível de detalhes capturados. No entanto, é importante observar que uma resolução mais fina não implica necessariamente em maior precisão; a representação precisa depende da fonte de dados e das técnicas de processamento. Os dados raster podem exigir muito da memória do computador, especialmente em altas resoluções. Várias técnicas e formatos de compactação, como GeoTIFF e JPEG2000, são usados para gerenciar o tamanho dos arquivos sem perda significativa de informações.

Usaremos diferentes tipos de dados raster, como o _Digital Elevation Map_ (DEM), que representa a elevação de uma área. Ele pode ser usado para diferentes tipos de análise de terreno, mas o usaremos principalmente como um mapa de base em combinação com a sombra de colina derivada. Outro tipo de dados raster são as imagens de satélite.

Os dados raster e vetoriais têm pontos fortes e fracos complementares. Enquanto os dados raster se destacam na captura de fenômenos contínuos e são eficientes para certos tipos de análise, os dados vetoriais são melhores para representar limites específicos e relações topológicas. Na prática, muitos projetos de SIG usam uma combinação de dados raster e vetoriais para obter uma representação e análise abrangentes das informações geográficas.

### 1.2.3 ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Adicionando dados ao seu projeto

Vamos adicionar as primeiras camadas. A janela do **``Data Source Manager``** (Gestor de Fonte de Dados) permite escolher os dados para carregar, dependendo do tipo de dados. Vamos usá-lo para carregar nosso conjunto de dados: clique no botão ![Data Source Manager](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/Open%20Data%20Source%20Manager.png) **``Open Data Source Manager``**.

Se não conseguir encontrar o ícone, verifique se a barra de ferramentas do **``Data Source Manager``** está ativa no menu **``View ‣ Toolbars``**.

![2.1.1 B Toolbar](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20B%20Toolbar.png)

Carregue o arquivo de dados vetoriais  _**Visigoths_Places.shp**_:
*	Clique na aba ![image](https://user-images.githubusercontent.com/66669249/175533646-13e606fc-b39a-444e-968a-3ed247228800.png) **``Vector``**.
*	Ative o tipo de fonte ![radiobutton](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/radiobuttonon.png) **``File``** source type.
* Pressione o botão **``…``**, ao lado de  **``Vector Dataset(s)``**.
* •	Escolha o arquivo _**Visigoths_Places.shp**_ em sua pasta com os arquivos do curso.
* Clique em **``Open``**. Você verá a janela original com o caminho para o arquivo local preenchido.

![2.1.1 C browser vector data](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20C%20browser%20vector%20data.png)

* Ignore os campos **``Options``**.
* •	Clique em **``Add``** aqui também. Os dados que você especificou serão carregados agora: você verá um item _**Visigoths_Places**_ no seu **Layers panel** (canto inferior esquerdo), com suas funcionalidaades mostradas na tela do mapa principal.
* •	Feche a janela do  **``Data Source Manager``**.

Parabéns! Agora você tem um mapa básico. Essa é uma boa hora para salvar seu trabalho.

### 1.2.4 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Try Yourself
Repita os passos acima para adicionar as camadas _**Visigoths_Roads.shp**_ e  _**Visigothic_provinces.shp**_ da mesma pasta para o mapa. Você pode ordenar suas camadas no Layer Panel arrastando-as: clique com o botão esquerdo do mouse na camada que deseja mover, segure e arraste para cima ou para baixo.

Depois de acrescentar todas as camadas, seu mapa deve parecer assim. 
![Uploaded_vector_files](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/27558673-233f-46d1-8da7-e045e7710de7)

Agora temos um primeiro mapa com linhas e pontos. Para análise, isso é suficiente e, geralmente, é melhor usar o menor número possível de camadas. Isso reduzirá a probabilidade do QGIS travar. Você perceberá que o QGIS tende a travar quando pedimos muito. Portanto, é fundamental salvar seu projeto sempre que possível.
<br>
Esse é um bom momento para isso! Certifique-se de salvar o projeto e todos os arquivos associados em seu HD.

### 1.2.5 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Adicionando uma camada de base (_Base layer_)
Embora um projeto com apenas linhas e pontos possa funcionar para análises, queremos adicionar uma camada de base para orientação.

#### Adicionando uma camada WMTS
Alguns mapas de base disponíveis online podem ser adicionados ao QGIS. O _Consortium of Ancient World Mappers_ ([CAWM](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Icons/mActionAddRasterLayer.png?raw=true)) tornou possível adicionar um WMTS (Web Map Tile Service), uma camada online composta de blocos (tiles). Você notará que, ao aumentar e diminuir o zoom, o mapa preencherá lentamente os blocos. Esse tipo de camada de base tem a vantagem de não precisarmos salvar um arquivo grande. No entanto, quando estivermos sem conexão com a Internet, não teremos uma camada de base.

* Acesso o **``Data Source Manager``** e selecione ![AddWMTS](https://docs.qgis.org/3.28/en/_images/mActionAddWmsLayer.png) WMS/WMTS.
* Clique em **``New``** e será exibida a seguinte janela pop-up:<br>
![Add_WMTS](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/40e92bd2-58b9-47cd-aa44-ac6fe51f06c2)
<br>

* •	Dê ao WMTS um nome na linha **``Name``**. Eu optei por "CAWM", já que isso deixa claro que ele fornece os blocos do _Consortium of Ancient World Mappers_.
* Na linha **``URL``** inserimos o endereço para os blocos: https://cawm.lib.uiowa.edu/wmts.
* Os demais campos não precisam de nenhuma alteração. Você pode clicar em  **``OK``**. A janela desaparecerá e agora você poderá ver o nome que escolheu em uma lista.
* Clique em **``Connect``**; isso mudará para a aba **`Tilesets`**.
* Selecione a camada do  _Consortium of Ancient World Mappers_ (quando for selecionada, ficará azul).
* Clique em **``Add``** e **``Close``**
<br>
Agora você tem um mapa de base legal para o seu mapa.
<br>
O lado ruim de um WMTS é que ele precisa de uma conexão com a internet para funcionar. Mais importante, nós não podemos usá-lo para análises de dados raster.

#### Adicionando uma DEM e Hillshade
Outra opção é adicionar um _mapa digital de elevação_ (Digital Elevation Map, DEM) como camada de base. Isso mostra a elevação do terreno como o WMTS. Além disso, podemos fazer análises raster nesses blocos. É possível fazer download de blocos raster para o mundo antigo [aqui](https://github.com/klokantech/roman-empire/releases/tag/v0.1). <br>Precisamos fazer o download dos seguintes arquivos:
* _**colorrelief.zip**_
* _**hillshade1.tif**_
<br>
Se você gosta de imagens chiques, então também pode baixar o _**bathymetry**_.
Repare que esses arquivos também estão disponíveis como um [WMTS server](https://github.com/klokantech/dare-raster-tiles). 
<br>

Depois de extrair os arquivos _**colorrelief**_, salve-os no mesmo local em que estão os outros arquivos. Podemos começar a adicionar o  _**colorrelief.tif**_.
<br>
Você pode adicionar essa camada de uma forma similar a das camadas vetoriais através do **``Data Source Manager``**, mas agora usamos  ![AddRaster](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Icons/mActionAddRasterLayer.png?raw=true). O raster pode estar definido como a camada superior, o que esconde todas as outras camadas. Você pode simplesmente clicar e arrastar a camada no painel ‘Layers’. 
<br>
Você vai reparar que o raster não parece tão limpa quanto a camada CAWM. As montanhas não têm profundidade. Nós podemos criar isso acrescentando a camada _hillshade_. Adicione o _**hillshade1.tif**_, tal como você fez com o _**colorrelief.tif**_. Certifique-se de que a camada _hillshade_ está acima da _colorrelief_.

O resultado será um pouco decepcionante: <br>
![Hillshade_unedited](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/dbb80c7c-d902-4891-8abb-1762c60c4b13)
<br>
Para que isso funcione corretamente, precisaremos começar a trabalhar com Simbologia.

## 1.3 Simbologia

A simbologia de uma camada é sua aparência visual no mapa. O maior ponto forte do SIG em relação a outras formas de representar dados com aspectos espaciais é que, com o SIG, você tem uma representação visual dinâmica dos dados com os quais está trabalhando. Portanto, a aparência visual do mapa (que depende da simbologia das camadas individuais) é muito importante. O usuário final dos mapas que você produz precisará ser capaz de ver facilmente o que o mapa representa. Igualmente importante, você precisa ser capaz de explorar os dados enquanto trabalha com eles, e uma boa simbologia ajuda muito. Em outras palavras, ter uma simbologia adequada não é um luxo ou apenas algo agradável de se ter. Na verdade, ela é essencial para que você use um GIS adequadamente e produza mapas e informações que as pessoas possam usar.

O _hillshade_ deixou nosso belo DEM (mapa digital de elevação) colorido em cinza. Como o nome indica, o hillshade (hill = colina/morro; shade = sombra) nos dá um relevo sombreado das colinas em preto e branco. Podemos resolver nosso problema usando modos de transparência. Isso será feito usando modos de mistura na aba **`Symbology`**.

### 1.3.1 Simbologia de Raster

#### Blending modes
Blending modes te permite controlar como diferentes camadas raster sobrepostas interagem uma com a outra. QGIS oferece diversas possibilidades de mistura:

* _Normal_: Esse é o modo de mesclagem padrão (e, portanto, atual), em que a camada superior obscurece completamente as camadas abaixo dela, com base na ordem das camadas no painel Layers.
* _Lighten_: Esse modo seleciona o máximo de cada componente dos pixels do primeiro plano e do plano de fundo. Esteja ciente de que os resultados tendem a ser irregulares e imprecisos.
* _Screen_: O modo de Screen clareia as camadas subjacentes e combina as cores da camada superior com as cores das camadas inferiores. É o oposto de Multiply e é frequentemente usado para criar um efeito de brilho.
* _Dodge_: O Dodge clareia as camadas subjacentes com base nas cores da camada superior. É usado para criar um efeito mais brilhante na composição final.
* _Addition_:  Adiciona os valores de pixel de um item ao outro. No caso de valores acima do valor máximo (no caso de RGB), o branco é exibido. Esse modo é adequado para destacar elementos.
* _Darken_: Esse modo é o oposto do _Lighten_, portanto, ele usa os valores mínimos dos pixels de cada matriz. Da mesma forma que o _Lighten_, ele tende a ser impreciso.
* _Multiply_: Esse modo escurece as camadas subjacentes e combina as cores da camada superior com as cores das camadas inferiores. É frequentemente usado para simular sombras.
* _Burn_: Burn escurece as camadas subjacentes com base nas cores da camada superior. É usado para criar um efeito mais escuro ou queimado na composição final.
* _Overlay_: A sobreposição combina os modos _Multiply_ e _Screen_. Ele aprimora o contraste entre as camadas escurecendo ou clareando, dependendo das cores das camadas. É útil para aprimorar a textura e os detalhes.
* _Hard Light_: _Hard Light_ é semelhante ao _Overlay_, mas com um efeito mais intenso. Ele escurece ou clareia as camadas subjacentes, dependendo das cores das camadas.
* _Soft Light_: Soft Light é uma versão mais suave da Hard Light e cria um efeito mais sutil quando combinada com as camadas subjacentes.
* _Difference_: O modo de _Difference_ calcula a diferença absoluta entre os valores de pixel das camadas superior e subjacente. Isso geralmente resulta em cores invertidas e de alto contraste.
* _Subtract_: Subtrai os valores de pixel de um item do outro. No caso de valores negativos, o preto é exibido.

Há diversas possibilidades e o melhor a fazer é experimentar para descobrir o que funciona melhor para você. Mas vamos manter as coisas simples e ver o quão facilmente podemos transformar nosso hillshade cinza em uma camada útil que dê ao DEM alguma profundidade. 

Para mudar a simbologia de uma camada, abra **`Layer Properties`**. Comecemos por mudar a transparência da camada **_hillshade1_** layer.
1. 1.	Clique com o botão direito na camada **_hillshade1_** na lista de camadas.
2. 2.	Selecione o item **`Properties…`** no menu que aparecer.

**`! Nota`**
Por padrão, você também pode acessar as propriedades de uma camada clicando duas vezes na camada na lista de camadas.

**`! Dica`**
O botão ![Symbology](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbology.png) no topo do painel **Layers** vai abrir o painel **Layer Styling**. Você pode usar esse painel para mudar algumas propriedades da camada: por padrão, as mudanças serão aplicadas imediatamente!

3. Na janela **`Layer Properties`**, selecione a aba![Symbology](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbology.png) **`Symbology`**:


![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/ebe20469-e723-48a6-b314-45a2541e75fd)

4. Click the drop down list under _Layer Rendering_ and select `Soft Light`
5. Click **`OK`**, and you will see the color return to your DEM.

You can switch the hillshade on and off to seee the difference between the two maps. You map has a bit of relief now.

#### Transparency
Besides Blending modes we also have the option to make layers transparent. Especially in the case of colorful rasters we might want to tone them down a bit, so they visually remain to the background. Double click the layer **_Colorrelief1_** to open the **`Layer Properties`**. We see the same Symbology options as with the **_hillshade1_**. However, this time we open the Transparency tab ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/e5908c78-25b8-4640-bf84-0408b151b9c4).

Here we see the _Global Opacity_ slider, which is default at `100%`. We can lower this until a point where we think our layer is still visible enough to provide some orientation, but not too much at the foreground.
You can set a new value by either sliding the slider or typing a value in the box. Set the value to `40%` and click **`OK`**. This might be slightly too transparent. Change the value to `60%` and click **`OK`**. This is more to my taste. As it is a manner of taste you should do what you prefer!

### 1.3.2 Vector symbology
Now we have a nice base layer, but our vector layers are still rather simple. Depending on the colors of the layers they might be hard to see. With symbology we can not only change the colors of layers, but also differentiate by attribute.

#### Point Data
Let us start with our **_Visigoths_places_** layer. In order to decide how to render our layer we want to know the fields and attributes we have. We can see this via the **`Attribute Table`**.

Right click the **_Visigoths_places_** layer and select the **`Attribute Table`**. This opens the table with the information behind the layer. It looks like this:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/b23b8918-81d2-4d24-bb36-f20fdc1a480f)

Each row, or line, represents one data point and the fields, or rows, give the different attributes of the data point. In the example above we see Sevilla in the first row. We can use all these fields to differentiate in the symbology. Let us start with the number of councils attended by cities.

##### 1.3.2.1 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Categorized Symbology

1. Close the **`Attribute Table`** and open the **`Layer Properties`** as we did with the raster layers;
2. In the **`Symbology`** tab, use the dropdown list to change ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/7f6f900a-8611-4cd0-ab39-10d97ebe3fe7)
`Single Symbol` to ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/9ec688df-8108-481b-be87-a0e99e901963)
`Categorized`;
3. Select in the `Value` drop down list `Number_Cou` (note that field names are limited to 10 characters) and click **`Classify`**.
<br> Now QGIS gives each attribute value a differently colored icon.
4. Click **`Apply`**
<br> Although the differentiation is nice, the map is not much clearer. However, we can uncheck boxes to show specific numbers or exclude `all other values`.
<br>Let us differentiate the 
6. Switch back to ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/a42513d1-cc31-497f-b339-65fcb1f46492)
`Single Symbol`;
7. Click on the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/d15e5e79-fb0f-4e7d-a8a6-013c2e1770d4) button next to the **_Size_** option.
8. Open the `Assistant...`
9. Select the `Number_Cou` field as `Source`.
10. Write `1`in the `Values from` box and change `to` to `19`. Now we have used our minimum and maximum value in the Number_Cou field. The excludes all places from where we have no evidence of people attending a council.
11. Change the `Size` range from 1 to 10 into 1 to 5. You will see that the icons are half the size now.
12. Click **`OK`** to return to the **`Symbology`** tab.
<br> If you want you can change the color of the icon. You will notice that the Size field is now greyed out and the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/d15e5e79-fb0f-4e7d-a8a6-013c2e1770d4) button yellow to indicate there is an active Data defined override.
13. Click **`OK`** to see the result.

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/c7058b99-9778-4cd0-a90c-cbb03ecbd4c9)

##### 1.3.2.2 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Rule-based Symbology

However, we might want to use one of the other fields of the Places layer. We can right click the layer and click  **`Duplicate Layer`**. This will display the same layer twice, with the addition 'copy'. You can right click this 'copy' layer and select **`Rename Layer`**. Rename the layer to **_'Sees'_**.
NOTE even when renaming the layer the base file will remain the same, so changing attributes or fields will effect both layers.
<br>
Uncheck the box before the **_Visigoths_places_** layer to switch it off.
<br>
Let's create a new differentiation for the **_Sees_** layer. We want to show all places that once were a episcopal see and differentiate them from the metropolitan sees. We will use ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/24afe579-491e-43ad-9168-789e101767a5) `Rule-based` Symbology. 
 

1. Open the **`Symbology`** tab and select ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/24afe579-491e-43ad-9168-789e101767a5) `Rule-based`
2. Click the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/6bb32445-d3bb-443f-954f-0b4b57573fb1) to open the `Edit Rule` panel:
   
   ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/5778d63a-0cd3-41c2-bfd5-dd7bbdb3f638)

3. Enter 'Episcopal' in the `Label` field
<br> To select only those places where a bishop once resided we need to select the places with data in the `Council_pr` field.
4. Enter in the `Filter` field the formula:  "Council_pr" IS NOT NULL
5. Click **`OK`**
<br>The 'IS NOT NULL' formula will give us all places with data in the field "Council_pr". In addition we might want to high light the places that were metropolitan sees.
6. Again click the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/6bb32445-d3bb-443f-954f-0b4b57573fb1) to open the `Edit Rule` panel
7. Write 'Archiepiscopal' in the `Label` field and in the `Filter` field enter the formula: "Council_pr"  LIKE '%Sedis%'
<br> The 'LIKE' statement gives us the possibility to search for parts of the attributes, in contrast to = which only gives exact outcomes. The % function as delimiters of our search. Everything before and after 'Sedis' is neglected, this way we don't need to be precise in our formula.
8. Scroll all the way down in the `Edit Rule` panel to the **`Symbol`** section where we see different symbols:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/2cbb0406-ada5-4e8c-996e-b564b7dddc32)

9. Select the cross with a fill and enter `-2.00` in **`Offset`** 'y'.
10. Click **`OK`** to close the `Edit Rule` panel
11. Click **`OK`** to close the the **`Layer Properties`** panel.

Now we have differentiated between the places that had bishops and those that were archiepiscopal sees. 

##### 1.3.2.3 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Do it yourself line data symbology
In addition we have two line layers: **_Visigoths_Roads_** and **_Visigothic_provinces_**. 

The roads dataset doesn't have added attributes that allow for further differentiation. So we will only change the symbology to make it represent roads. Chose whatever symbology fits your idea for roads.

Check the Attributes of the provinces layer and decide, based on the fields, what you want to display.

## 1.4 Primeiro mapa

Now that you’ve got a map, you need to be able to print it or to export it to a document. The reason is, a GIS map file is not an image. Rather, it saves the state of the GIS program, with references to all the layers, their labels,colors, etc. So for someone who doesn’t have the data or the same GIS program (such as QGIS), the map file will be useless. Luckily, QGIS can export its map file to a format that anyone’s computer can read, as well as printing out the map if you have a printer connected. Both exporting and printing is handled via the **Print Layout**.

### 1.4.1. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: The Layout Manager
QGIS allows you to create multiple maps using the same map file. For this reason, it has a tool called the **Layout Manager**.

1. Click on the **```Project ‣ Layout Manager…```** menu entry to open this tool. You’ll see a blank **```Layout Manager```** dialog appear.

![5.1.1 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.1%20A%20layout_manager_dialog.png)

2. Under **``New from Template``**, select **``Empty layout``** and press the **``Create…``** button.
3. Give the new layout the name of Almanzora and click **``OK``**.
4. You will now see the **Print Layout** window:

![5.1.1 B](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.1%20B%20print_composer_dialog_Almanzora.png)

You could also create this new layout via the **``Project ‣ New Print Layout…``** menu.

Whichever route you take, the new print layout is now accessible from the **``Project ‣ Layouts``** menu.

### 1.4.2. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Basic Map Composition
You can change the size of your layout to fit the print size you need.

1. Right-click on the sheet in the central part of the layout window and choose **``Page properties``** in the context menu.
2. Check that the values in the **``Item Properties``** tab are set to the following:
   * **``Size``**: **`A4`**
   * **``Orientation``**: **`Landscape`**

Now you’ve got the page layout the way you wanted it, but this page is still blank. It clearly lacks a map. Let’s fix that!

3. Click on the ![addMap](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAddMap.png)**`Add New Map`** button.

With this tool activated, you will be able to place a map on the page.

4. Click and drag a box on the blank page. The map will appear on the page.
5. You can move the map by clicking and dragging it around
6. Or resize it by clicking and dragging the boxes on the edges:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/f869f812-6832-4e44-aea4-541e6ed3c0b3)


**``! Note``**
Your map may look a lot different, of course! This depends on how your own project is set up. But not to worry! These instructions are general, so they will work the same regardless of what the map itself looks like.

7. Be sure to leave margins along the edges, and a space along the top for the title.
8. Zoom in and out on the page (but not the map!) by using these buttons:

![Zoom full extent](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomFullExtent.png)
![Zoom in](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomIn.png)
![Zoom out](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomOut.png)

9. Zoom and pan the map in the main QGIS window. You can also pan the map using the ![moveItemContent](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionMoveItemContent.png)**`Move item content`** tool.

The map view updates as you zoom in or zoom out.

10. If, for any reason, the map view does not refresh correctly, you can force the map to refresh by clicking the ![refresh](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionRefresh.png)**`Refresh view`** button.

Remember that the size and position you’ve given the map doesn’t need to be final. You can always come back and change it later if you’re not satisfied. For now, you need to ensure that you’ve saved your work on this map. Because a Print Layout in QGIS is part of the main map file, you must save your project.

11. Go to the **```Layout ‣```**![fileSave](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionFileSave.png)**```Save Project```**. This is a convenient shortcut to the one in the main dialog.

### 1.4.3. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Adding a Title
Now your map is looking good on the page, but your readers/users are not being told what’s going on yet. They need some context, which is what you’ll provide for them by adding map elements. First, let us add a title.

1. Click on the ![label](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionLabel.png)**`Add Label`** button
2. Click on the page, above the map, accept the suggested values in the **```New Item Properties```** dialog, and a label will appear at the top of the map.
3. Resize it and place it in the top center of the page. It can be resized and moved in the same way that you resized and moved the map.
As you move the title, you’ll notice that guidelines appear to help you position the title in the center of the page.
However, there is also a tool in the Actions Toolbar to help position the title relative to the map (not the page): 
![alignLeft](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignLeft.png)
4. Click the map to select it
5. Hold in _Shift_ on your keyboard and click on the label so that both the map and the label are selected.
6. Look for the ![alignLeft](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignLeft.png)**`Align selected items left`** button and click on the dropdown arrow next to it to reveal the positioning options and click ![alignHCenter](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignHCenter.png) **``Align center``**:

![5.1.3 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.3%20A%20%20align_center_dropdown.png)

Now the label frame is centered on the map, but not the contents. To center the contents of the label:

1. Select the label by clicking on it.
2. Click on the **``Item Properties``** tab in the side panel of the layout window.
3. Change the text of the label to “Episcopal Sees of Visigothic Hispania”

4. Use this interface to set the font and alignment options under the **``Appearance``** section:
   1. Choose a large but sensible font (the example will use the font _`Arial`_ with a size of _`36`_)
   2. Set the **``Horizontal Alignment``** to **``Center``**.
   3. Set the **``Vertical Alignment``** to **``Middle``**.

You can also change the font color, but it’s probably best to keep it black as per the default.

5. The default setting is not to add a frame to the title’s text box. However, if you wish to add a frame, you can do so:
   1. In the **``Item Properties``** tab, scroll down until you see the **``Frame``** option.
   2. Click the **``Frame``** checkbox to enable the frame. You can also change the frame’s color and width.

In this example, we won’t enable the frame, so here is our page so far:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/900d7f76-dc51-40b1-8986-188aba0ddbe6)


To make sure that you don’t accidentally move these elements around now that you’ve aligned them, you can lock items into place:

1. Select both the label and the map items
2. Click the ![lockItems](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionLockItems.png) **`Lock Selected Items`** button in the Actions Toolbar.

**``! Note``**

Click the ![unlockAll](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionUnlockAll.png) **`Unlock All Items`** button in the **Actions Toolbar** to be able to edit the items again.

### 1.4.4. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Adding a Legend
The map reader also needs to be able to see what various things on the map actually mean. In some cases, like the place names, this is quite obvious. In other cases, it’s more difficult to guess, like the colors of the forests. Let’s add a new legend.

1. Click on the ![addLegend](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAddLegend.png)**`Add Legend`** button
2. Click on the page to place the legend, accept the suggested values in the **``New Item Properties``** dialog,
3. A legend is added to the layout page, showing layers symbology as set in the main dialog.
4. As usual, you can click and move the item to where you want it:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/8c1af17c-59e2-4095-90b4-c54b700da7da)


### 1.4.5. ![moderate](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/moderate.png) Follow Along: Customizing Legend Items
As you can see the legend is rather long. However, not everything on the legend is necessary, so let’s remove some unwanted items.

1. In the **``Item Properties tab``**, you’ll find the **``Legend items``** group.
2. Uncheck the ![unchecked](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/checkbox_unchecked.png) **``Auto update box``**, allowing you to directly modify the legend items
3. Select the entries with the **``CAWM``** and the base maps.
4. Delete these from the legend by clicking the ![signMinus](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbologyRemove.png) button.

Deleting items within layers is also possible and works in the same way. 

5. Repeat this with all elements that are not visible within the map. You can also use an automatic function for that: Under the **``Legend items``** box, you will find a checkbox **``Only show items inside linked map``**. By enabling it, QGIS will automatically only show features of your current map section as legend items.

You can also rename items.

1. Select the _**Visgigoths_Roads**_ layer from the same list.
2. Click the ![symbologyEdit](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbologyEdit.png)**`Edit selected item`** properties button.
3. Rename the layer to _**Road**_. Do the same for the provinces layer. 

You can also hide layer and item names. Right click _**Sees**_ and check **`Hidden`**. 

You can also reorder the items.

For good measure we always add a north arrow. This helps people orientate when they are unfamiliar with the region. Click the ![north_arrow](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/north_arrow.png)**`Add North Arrow`**. drag a rectangle below the legend. Note that the north arrow is oriented correctly.

Similarly adding a scale bar is good practice. Add a scale bar below the north arrow. 

This is the result:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/293c25b0-9ebf-4dcd-a2d4-6bd6abf91d19)


### 1.4.6. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Exporting Your Map
**``!Note``** Did you remember to save your work often?

Finally the map is ready for export! You’ll see the export buttons near the top left corner of the layout window:

* ![filePrint](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionFilePrint.png)**`Print Layout`**: interfaces with a printer. Since the printer options will differ depending on the model of printer that you’re working with, it’s probably better to consult the printer manual or a general guide to printing for more information on this topic.

The other buttons allow you to export the map page to a file.

* ![saveMapAsImage](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveMapAsImage.png)**`Export as Image`**: gives you a selection of various common image formats to choose from. This is probably the simplest option, but the image it creates is “dead” and difficult to edit.

* ![saveAsSVG](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsSVG.png)**`Export as SVG`**: If you’re sending the map to a cartographer (who may want to edit the map for publication), it’s best to export as an SVG. SVG stands for “Scalable Vector Graphic”, and can be imported to programs like [Inkscape](https://inkscape.org/) or other vector image editing software.

* ![saveAsPDF](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsPDF.png)**`Export as PDF`**: If you need to send the map to a client, it’s most common to use a PDF, because it’s easier to set up printing options for a PDF. Some cartographers may prefer PDF as well, if they have a program that allows them to import and edit this format.

For our purposes, we’re going to use PDF.

1. Click the ![saveAsPDF](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsPDF.png)**`Export as PDF`** button
2. Choose a save location and a file name as usual. The following dialog will show up.

![5.1.6 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.6%20A%20layout_export_pdf.png)

3. You can safely use the default values now and click **``Save``**.

QGIS will proceed to the map export and push a message on top of the print layout dialog as soon as it finishes.

4. Click the hyperlink in the message to open the folder in which the PDF has been saved in your system’s file manager
5. Open it and see how your layout looks.

Everything is OK? Congratulations on your first completed QGIS map project!

6. Anything unsatisfying? Go back to the QGIS window, do the appropriate modifications and export again.
7. Remember to save your project file.


Now you know how to work with different types of data in a GIS project and prepare them for publication!

[Passar para a aula seguinte](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/2.%20Dados_geoespaciais_recolha_e_curadoria.md)

