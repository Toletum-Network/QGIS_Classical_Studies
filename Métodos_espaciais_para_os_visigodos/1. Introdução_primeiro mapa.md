# Introdução: primeiro mapa

The first session will introduce you to the interface of QGIS. Make sure you have installed the programme and downloaded the needed data before the course starts. If you have no experience with Geographical Information Systems (GIS) we advice you to take a good look at the interface. A detailed walk through can be found in the [Second Module](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/2.%20Module:_The_Interface.md#2-module-the-interface) of the course [QGIS for Classical Studies](https://github.com/Toletum-Network/QGIS_Classical_Studies#qgis-online-course-for-classical-studies).

The first online session will start with a short introduction of the course. Thereafter we will start to make our first maps by adding geospatial data to the GIS-project. From there we will start to make the first maps.

## Plano de aula

| **Hora**         |   **Tema**   |
|:--------------|:-----------|
| 9.00 - 9.30 | [Introdução e interface](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_primeiro%20mapa.md#11-introdu%C3%A7%C3%A3o-e-interface) |
| 9.30 - 9.45 | Perguntas |
| 9.45 - 10.15 | [Dados no QGIS](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_primeiro%20mapa.md#12-dados-no-qgis)|
| 10.15 - 10.30 | **Pausa** | 
| 10.30 - 11.00 | [Simbologia](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_primeiro%20mapa.md#13-simbologia) |
| 11.00 - 11.45 | [Primeiro mapa](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/1.%20Introdu%C3%A7%C3%A3o_primeiro%20mapa.md#14-primeiro-mapa)|
| 11.45 - 12.00 | Perguntas |

[Powerpoint]()

## 1.1 Introdução e interface

A GIS allows us to visualize spatial data, that is information that has a position in a plain. This can be in the 'real' world, using existing coordinates we can place them in the GIS at their locations. However, we can also map data in reference to each other. As such it is possible to map elements within their own fictional coordinate system based on thier own relative position. For example, we can use the coordinates of Ptolemy to create his maps in QGIS.
<br>
It is 'real' world in '' as there is a slight problem with carthography: we are presenting data from the globe in a flat plain, or screen or in printed form. This means we have to convert the spherical shape (3D) of the globe to a planar shape (2D) or map projection. For this we need a Coordinate Reference System (CRS).
<br>
### Assignment ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png)
Open a new project with the CRS EPSG:4326 also called the WGS84.
In the lower bar you will see *Coordinate*, type 'world' in the *Coordinate* field and hit enter. Now you will see the world in the CSR WGS84. 
![Add world map](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/World%20WGS84.jpg)
<br>
At the lower right corner we can switch the EPSG. Let's switch it to another familiar view: EPSG 3857, this is the WebMercator.
![Change EPSG](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/ChangeEPSG.jpg)
<br>
This projection is often used for webbased mapping, such as Google. These projections are cylindrical and they have the problem that they tend to exaggerate areas further from the equator:
<br>
<img src=https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/Images/Worlds_animate.gif width=400 height=400>
<br>
To represent the plane we are working in as precise as possible we will be using a local projection the ERTS89/UTM 30N. This projection renders the Iberian Peninsula very precise. However, when we see the whole world, we can observe the problem of projections. Another benefit of this projection is the fact that it uses the metrical system, rather than degrees. This will be of importance when we start making buffers and calculate areas and distance. 
<br>
For more information see the section on projections and CRS in the [QGIS Gentle Introduction](https://docs.qgis.org/3.28/en/docs/gentle_gis_introduction/coordinate_reference_systems.html). 

## 1.2 Dados no QGIS
We already added our first bit of data to our map by adding the world lay-out. This world map we have just added is a vector map.

### 1.2.1 Vector data
Vector data is one of the fundamental data types used in Geographic Information Systems (GIS). It represents spatial information using discrete geometric shapes, such as points, lines, and polygons, along with associated attributes. Vector data is well-suited for representing features that have distinct boundaries and can be described with discrete coordinates.<br>
Vector data is versatile and can represent complex spatial relationships and topologies accurately. It allows for precise modeling of features and supports various types of spatial analysis, such as buffering, overlay, and network analysis. However, vector data can become quite dense and memory-intensive when dealing with extensive datasets or high-resolution imagery.
To understand more about Vector data you can review Modules [4](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/4.%20Module:%20Classifying%20Vector%20Data.md), [6](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/6.%20Module:%20Creating%20Vector%20Data.md) and [7](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Training_Manual/7.%20Module:%20Vector%20Analysis.md).<br>
There are three main types of vector data:

#### _Point data_
Points represent individual locations in space and are defined by a single pair of coordinates along the X and Y axis or latitude and longitude. In addition we plot pijnt data along a Z axis, giving it a value for heigth or depth. Besides the coordinates point data can hold attributes. Points can be used to represent features like cities, landmarks, or sampling locations.
<br>
In our case we will be working with the church councils of the Visigothic period. We can record the years in which places were represented at councils. In addition we might add other elements we are interested in such as demography, size, type etc. 

#### _Line data_
The second type of vector data is line data. In principle lines are sequences of connected points that represent linear features like roads, rivers, or trails. They can also be used to represent non-linear features by defining a series of connected line segments.

#### _Polygon data_
Polygons are closed shapes formed by connecting multiple points to create an enclosed area. They are used to represent features like land parcels, lakes, countries, and administrative boundaries.
<br>
Every time we start working with data we need to consider what type of data and what scale we are dealing with a city can be a point or a (number of) polygon(s). For example when working on the scale of the whole Iberian Peninsula we migth want to have cities rendered as points with attributes. However, when working within a smaller region, we migth want to render the city as a polygon, indication the rea that the city takes up in its territory. Or we migth even decide to create polygons for districts or even individual buildings.
<br>
Similarly we might want to select between polygon or line data. In our case we should consider for instance the use of provinces as either line or polygon data. For cartography we migth want to use line data as this indicates the boundary between two provinces. However, if we want to use GIS to select features within a province or we want to calculate the area of a province, we need to opt for a polygon.

### 1.2.2 Raster data
Raster data is another fundamental data type used in Geographic Information Systems (GIS) alongside vector data. Unlike vector data, which represents geographic features using discrete geometric shapes, raster data represents spatial information as a grid of cells or pixels. Each cell in the grid contains a value that represents a specific attribute or measurement for that location on the Earth's surface.

Key characteristics of raster data in GIS include:

_Grid Structure_: Raster data is organized in a grid format, where each cell, also known as a pixel, corresponds to a specific geographic location. The size of the cells determines the level of detail in the dataset. Smaller cells result in higher resolution but may lead to larger data sizes.

_Cell Values_: Each cell in the raster grid contains a value that represents a particular attribute. This attribute can vary widely depending on the application. For example, a raster dataset could represent elevation values, temperature readings, land cover categories, or satellite imagery intensity values.

_Continuous Surfaces_: Raster data is well-suited for representing continuous surfaces or phenomena that change gradually over space, such as elevation, temperature, and precipitation. The grid structure allows for capturing variations across space.

_Spatial Analysis_: Raster data is commonly used for spatial analysis tasks such as interpolation, suitability modeling, and surface analysis. Analytical operations can be performed by evaluating the values of neighboring cells.

Raster data resolution affects the level of detail captured. However, it's important to note that finer resolution doesn't necessarily imply higher accuracy; accurate representation depends on the data source and processing techniques. Raster data can be memory-intensive, especially at high resolutions. Various compression techniques and formats, such as GeoTIFF and JPEG2000, are used to manage file sizes without significant loss of information.

We will use different types of rasterdata, such as Digital Elevation Map (DEM), which represents the the elevation of an area. This can be used for different types of terrainanalysis, however, we will use it mostly as a base map in combination with the derived hill shade. Another type of ratser data are satellite images. 

Raster and vector data have complementary strengths and weaknesses. While raster data excels in capturing continuous phenomena and is efficient for certain types of analysis, vector data is better for representing discrete boundaries and topological relationships. In practice, many GIS projects use a combination of both raster and vector data to achieve comprehensive geographic information representation and analysis.

### 1.2.3 Adding data to your project
Let's add the first layers. The **``Data Source Manager``** dialog allows you to choose the data to load depending on the data type. We’ll use it to load our dataset: click the ![Data Source Manager](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/Open%20Data%20Source%20Manager.png) **``Open Data Source Manager``** button.

If you can’t find the icon, check that the **``Data Source Manager``** toolbar is enabled in the **``View ‣ Toolbars``** menu.

![2.1.1 B Toolbar](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20B%20Toolbar.png)

Load the _**Visigoths_Places.shp**_ vector dataset:
* Click on the ![image](https://user-images.githubusercontent.com/66669249/175533646-13e606fc-b39a-444e-968a-3ed247228800.png) **``Vector``** tab.
* Enable the ![radiobutton](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/radiobuttonon.png) **``File``** source type.
* Press the **``…``** button next to **``Vector Dataset(s)``**.
* Select the _**Visigoths_Places.shp**_ file in your directory with the files for the course.
* Click **``Open``**. You will see the original dialog, with the local file path filled in.

![2.1.1 C browser vector data](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/2.1.1%20C%20browser%20vector%20data.png)

* Ignore the **``Options``** fields.
* Click **``Add``** here as well. The data you specified will now load: you can see a _**Visigoths_Places**_ item in the **Layers panel** (bottom left) with its features shown in the main map canvas.
* Close the **``Data Source Manager``** dialog

Congratulations! You now have a basic map. Now would be a good time to save your work.

### 1.2.4 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Try Yourself
Repeat the steps above to add the _**Visigoths_Roads.shp**_ and  _**Visigothic_provinces.shp**_ layers from the same folder to the map. You can order your layers in the Layer Panel by dragging them: left click the layer you want to move, hold and drag up or down.

After adding all layers your map should look something like this.
![Uploaded_vector_files](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/27558673-233f-46d1-8da7-e045e7710de7)

Now we have a first map with lines and dots. For analysis this is enough, and often best to use as few layers as possible. This will make QGIS less likely to crash. You will find that QGIS tends to crash when we ask too much. Therefore it is key to save your project as often as possible.
<br> Now would be a good time! Make sure you safe the project and all associated files on your local drive.

### 1.2.5 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Adding a Base layer
Eventhough a project with only lines and dots might work for analyses, we want to add a base layer for orientation.

#### Adding a WMTS layer
Some online basemaps can be added to QGIS. The _Consortium of Ancient World Mappers_ ([CAWM](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Icons/mActionAddRasterLayer.png?raw=true)) has made it possible to add a WMTS (Web Map Tile Service), this is an online layer composed of tiles. You will notice that when we zoom in and out the map will slowly fill the tiles. This type has the advantage that we don't have to save a large file. However, when we find ourselves without an internet connection, we will not have a base layer.

* Go to the  **``Data Source Manager``** and select ![AddWMTS](https://docs.qgis.org/3.28/en/_images/mActionAddWmsLayer.png) WMS/WMTS.
* Click **``New``** to get the following pop-up screen:<br>
![Add_WMTS](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/40e92bd2-58b9-47cd-aa44-ac6fe51f06c2)
<br>

* Give the WMTS a name in the line **``Name``**. I have opted for "CAWM" as this makes clear that this gives me the tiles of the _Consortium of Ancient World Mappers_.
* In the line **``URL``** we enter the URL for the tiles: https://cawm.lib.uiowa.edu/wmts.
* The remainder of the fields don't need any changes. You can click **``OK``**
The screen disappears and now you see the name you have given in the list.
* Click **``Connect``**, this will shift to the tab Tilesets.
* Select the Layer of the _Consortium of Ancient World Mappers_ (when selected it will be blue)
* Click **``Add``** and **``Close``**
Now you have a neat basemap for your map.
<br>
The downside of a WMTS is that it needs an internet connection to work. More importantly, we cannot use it for raster data analyses.

#### Adding a DEM and Hillshade
Another option is to add a DEM (Digital Elevation Map) as base layer. This shows the elevation of the terrain like the WMTS. In addition we can do Raster analyses to these tiles. 
We can download raster tiles for the ancient world [here](https://github.com/klokantech/roman-empire/releases/tag/v0.1). We need to download:
* _**colorrelief.zip**_
* _**hillshade1.tif**_
If you like fancy sees then you can also download the _**bathymetry**_.
Note that these files are also available as [WMTS server](https://github.com/klokantech/dare-raster-tiles). 
<br>

After unzipping the _**colorrelief**_ files, save them in the same location as the other files, we can start adding the raster _**colorrelief.tif**_.
You can add this layer in a similar manner as the vector layers via the **``Data Source Manager``**, but now we use ![AddRaster](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/Icons/mActionAddRasterLayer.png?raw=true). The raster might the top layer and as such hiding all other layers. You can simply click and drag the layer in the 'Layers' panel.
<br>
You will notice that the raster does not look as neat as the CAWM layer. The mountains don't have any depth. We can create this by adding a hillshade layer. Add the _**hillshade1.tif**_ as you did with the _**colorrelief.tif**_. Make sure the hillshade layer is on top of the colorrelief.

The result will be a bit disappointing: <br>
![Hillshade_unedited](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/dbb80c7c-d902-4891-8abb-1762c60c4b13)
<br>
In order to make this work we will need to start to work with Symbology.

## 1.3 Simbologia

The symbology of a layer is its visual appearance on the map. The basic strength of GIS over other ways of representing data with spatial aspects is that with GIS, you have a dynamic visual representation of the data you’re working with. Therefore, the visual appearance of the map (which depends on the symbology of the individual layers) is very important. The end user of the maps you produce will need to be able to easily see what the map represents. Equally as important, you need to be able to explore the data as you’re working with it, and good symbology helps a lot. In other words, having proper symbology is not a luxury or just nice to have. In fact, it’s essential for you to use a GIS properly and produce maps and information that people will be able to use.

The hillshade has made our beautiful colored DEM grey. As the name implies, the hillshade gives us a shaded relief of the hills in black to white. We can solve our problem by using modes of transparancy. This will be done using blending modes under the Symbology tab. 

### 1.3.1 Raster Symbology

#### Blending modes
Blending modes allow you to control how different superimposed raster layers interact with eachother. QGIS offers several blending possibilities:

* _Normal_: This is the default (and thus current) blending mode, where the top layer completely obscures the layers beneath it, based on the layer order in the Layers Panel.
* _Lighten_: This mode selects the maximum of each component from the foreground and background pixels. Be aware that the results tend to be jagged and harsh.
* _Screen_: The Screen blending mode lightens the underlying layers and combines the colors of the top layer with the colors of the layers beneath. It's the opposite of Multiply and is often used to create a glowing effect.
* _Dodge_: Dodge lightens the underlying layers based on the top layer's colors. It's used to create a brighter effect in the final composition.
* _Addition_:  Adds pixel values of one item to the other. In case of values above the maximum value (in the case of RGB), white is displayed. This mode is suitable for highlighting features.
* _Darken_: This mode is the opposite of _Lighten_, therefore it uses the minimum values of the pixels of each raste. Similar to _Lighten_ it tends to be harsh.
* _Multiply_: This mode darkens the underlying layers and combines the colors of the top layer with the colors of the layers beneath. It's often used to simulate shadows.
* _Burn_: Burn darkens the underlying layers based on the top layer's colors. It's used to create a darker or burned effect in the final composition.
* _Overlay_: Overlay combines Multiply and Screen blending modes. It enhances the contrast between layers by darkening or lightening, depending on the colors of the layers. It's useful for enhancing texture and detail.
* _Soft Light_: Soft Light is a softer version of Hard Light and creates a more subtle effect when combined with the underlying layers.
* _Hard Light_: Hard Light is similar to Overlay but with a more intense effect. It either darkens or lightens the underlying layers, depending on the colors of the layers.
* _Difference_: The Difference blending mode calculates the absolute difference between pixel values of the top and underlying layers. It often results in high-contrast, inverted colors.
* _Subtract_: Subtracts pixel values of one item from the other. In the case of negative values, black is displayed.

There are quite some possibilities and best practice is to play around and find out what works best for you. But let's keep it simple and see how we easily can transform our grey hillshade to a useful layer to give the DEM some depth. 

To change a layer’s symbology, open its **`Layer Properties`**. Let’s begin by changing the transparancy of the **_hillshade1_** layer.
1. Right-click on the **_hillshade1_** layer in the layers list.
2. Select the menu item **`Properties…`** in the menu that appears.

**`! Note`**
By default, you can also access a layer’s properties by double-clicking on the layer in the Layers list.

**`! Tip`**
The ![Symbology](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbology.png) button at the top of the **Layers** panel will open the **Layer Styling** panel. You can use this panel to change some properties of the layer: by default, changes will be applied immediately!

3. In the **`Layer Properties`** window, select the ![Symbology](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbology.png) **`Symbology`** tab:


![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/ebe20469-e723-48a6-b314-45a2541e75fd)

4. Click the drop down list under _Layer Rendering_ and select `Soft Light`
5. Click **`OK`**, and you will see the color return to your DEM.

You can switch the hillshade on and off to seee the difference between the two maps. You map has a bit of relief now.

#### Transparency
Besides Blending modes we also have the option to make layers transparent. Especially in the case of colorful rasters we might want to tone them down a bit, so they visually remain to the background. Double click the layer **_Colorrelief1_** to open the **`Layer Properties`**. We see the same Symbology options as with the **_hillshade1_**. However, this time we open the Transparency tab ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/e5908c78-25b8-4640-bf84-0408b151b9c4).

Here we see the _Global Opacity_ slider, which is default at `100%`. We can lower this until a point where we think our layer is still visible enough to provide some orientation, but not too much at the foreground.
You can set a new value by either sliding the slider or typing a value in the box. Set the value to `40%` and click **`OK`**. This might be slightly too transparent. Change the value to `60%` and click **`OK`**. This is more to my taste. As it is a manner of taste you should do what you prefer!

### 1.3.2 Vector symbology
Now we have a nice base layer, but our vector layers are still rather simple. Depending on the colors of the layers they might be hard to see. With symbology we can not only change the colors of layers, but also differentiate by attribute.

#### Point Data
Let us start with our **_Visigoths_places_** layer. In order to decide how to render our layer we want to know the fields and attributes we have. We can see this via the **`Attribute Table`**.

Right click the **_Visigoths_places_** layer and select the **`Attribute Table`**. This opens the table with the information behind the layer. It looks like this:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/b23b8918-81d2-4d24-bb36-f20fdc1a480f)

Each row, or line, represents one data point and the fields, or rows, give the different attributes of the data point. In the example above we see Sevilla in the first row. We can use all these fields to differentiate in the symbology. Let us start with the number of councils attended by cities.

##### 1.3.2.1 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Categorized Symbology

1. Close the **`Attribute Table`** and open the **`Layer Properties`** as we did with the raster layers;
2. In the **`Symbology`** tab, use the dropdown list to change ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/7f6f900a-8611-4cd0-ab39-10d97ebe3fe7)
`Single Symbol` to ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/9ec688df-8108-481b-be87-a0e99e901963)
`Categorized`;
3. Select in the `Value` drop down list `Number_Cou` (note that field names are limited to 10 characters) and click **`Classify`**.
<br> Now QGIS gives each attribute value a differently colored icon.
4. Click **`Apply`**
<br> Although the differentiation is nice, the map is not much clearer. However, we can uncheck boxes to show specific numbers or exclude `all other values`.
<br>Let us differentiate the 
6. Switch back to ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/a42513d1-cc31-497f-b339-65fcb1f46492)
`Single Symbol`;
7. Click on the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/d15e5e79-fb0f-4e7d-a8a6-013c2e1770d4) button next to the **_Size_** option.
8. Open the `Assistant...`
9. Select the `Number_Cou` field as `Source`.
10. Write `1`in the `Values from` box and change `to` to `19`. Now we have used our minimum and maximum value in the Number_Cou field. The excludes all places from where we have no evidence of people attending a council.
11. Change the `Size` range from 1 to 10 into 1 to 5. You will see that the icons are half the size now.
12. Click **`OK`** to return to the **`Symbology`** tab.
<br> If you want you can change the color of the icon. You will notice that the Size field is now greyed out and the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/d15e5e79-fb0f-4e7d-a8a6-013c2e1770d4) button yellow to indicate there is an active Data defined override.
13. Click **`OK`** to see the result.

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/c7058b99-9778-4cd0-a90c-cbb03ecbd4c9)

##### 1.3.2.2 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Rule-based Symbology

However, we might want to use one of the other fields of the Places layer. We can right click the layer and click  **`Duplicate Layer`**. This will display the same layer twice, with the addition 'copy'. You can right click this 'copy' layer and select **`Rename Layer`**. Rename the layer to **_'Sees'_**.
NOTE even when renaming the layer the base file will remain the same, so changing attributes or fields will effect both layers.
<br>
Uncheck the box before the **_Visigoths_places_** layer to switch it off.
<br>
Let's create a new differentiation for the **_Sees_** layer. We want to show all places that once were a episcopal see and differentiate them from the metropolitan sees. We will use ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/24afe579-491e-43ad-9168-789e101767a5) `Rule-based` Symbology. 
 

1. Open the **`Symbology`** tab and select ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/24afe579-491e-43ad-9168-789e101767a5) `Rule-based`
2. Click the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/6bb32445-d3bb-443f-954f-0b4b57573fb1) to open the `Edit Rule` panel:
   
   ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/5778d63a-0cd3-41c2-bfd5-dd7bbdb3f638)

3. Enter 'Episcopal' in the `Label` field
<br> To select only those places where a bishop once resided we need to select the places with data in the `Council_pr` field.
4. Enter in the `Filter` field the formula:  "Council_pr" IS NOT NULL
5. Click **`OK`**
<br>The 'IS NOT NULL' formula will give us all places with data in the field "Council_pr". In addition we might want to high light the places that were metropolitan sees.
6. Again click the ![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/6bb32445-d3bb-443f-954f-0b4b57573fb1) to open the `Edit Rule` panel
7. Write 'Archiepiscopal' in the `Label` field and in the `Filter` field enter the formula: "Council_pr"  LIKE '%Sedis%'
<br> The 'LIKE' statement gives us the possibility to search for parts of the attributes, in contrast to = which only gives exact outcomes. The % function as delimiters of our search. Everything before and after 'Sedis' is neglected, this way we don't need to be precise in our formula.
8. Scroll all the way down in the `Edit Rule` panel to the **`Symbol`** section where we see different symbols:

![image](https://github.com/Toletum-Network/QGIS_Classical_Studies/assets/66669249/2cbb0406-ada5-4e8c-996e-b564b7dddc32)

9. Select the cross with a fill and enter `-2.00` in **`Offset`** 'y'.
10. Click **`OK`** to close the `Edit Rule` panel
11. Click **`OK`** to close the the **`Layer Properties`** panel.

Now we have differentiated between the places that had bishops and those that were archiepiscopal sees. 

##### 1.3.2.3 ![Basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Do it yourself line data symbology
In addition we have two line layers: **_Visigoths_Roads_** and **_Visigothic_provinces_**. 

The roads dataset doesn't have added attributes that allow for further differentiation. So we will only change the symbology to make it represent roads. Chose whatever symbology fits your idea for roads.

Check the Attributes of the provinces layer and decide, based on the fields, what you want to display.

## 1.4 Primeiro mapa

Now that you’ve got a map, you need to be able to print it or to export it to a document. The reason is, a GIS map file is not an image. Rather, it saves the state of the GIS program, with references to all the layers, their labels,colors, etc. So for someone who doesn’t have the data or the same GIS program (such as QGIS), the map file will be useless. Luckily, QGIS can export its map file to a format that anyone’s computer can read, as well as printing out the map if you have a printer connected. Both exporting and printing is handled via the **Print Layout**.

### 1.4.1. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: The Layout Manager
QGIS allows you to create multiple maps using the same map file. For this reason, it has a tool called the **Layout Manager**.

1. Click on the **```Project ‣ Layout Manager…```** menu entry to open this tool. You’ll see a blank **```Layout Manager```** dialog appear.

![5.1.1 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.1%20A%20layout_manager_dialog.png)

2. Under **``New from Template``**, select **``Empty layout``** and press the **``Create…``** button.
3. Give the new layout the name of Almanzora and click **``OK``**.
4. You will now see the **Print Layout** window:

![5.1.1 B](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.1%20B%20print_composer_dialog_Almanzora.png)

You could also create this new layout via the **``Project ‣ New Print Layout…``** menu.

Whichever route you take, the new print layout is now accessible from the **``Project ‣ Layouts``** menu.

### 1.4.2. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Basic Map Composition
You can change the size of your layout to fit the print size you need.

1. Right-click on the sheet in the central part of the layout window and choose **``Page properties``** in the context menu.
2. Check that the values in the **``Item Properties``** tab are set to the following:
   * **``Size``**: **`A4`**
   * **``Orientation``**: **`Landscape`**

Now you’ve got the page layout the way you wanted it, but this page is still blank. It clearly lacks a map. Let’s fix that!

3. Click on the ![addMap](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAddMap.png)**`Add New Map`** button.

With this tool activated, you will be able to place a map on the page.

4. Click and drag a box on the blank page:

![5.1.2 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.2%20A%20drag_add_map%20Almanzora.png)
The map will appear on the page.

5. Move the map by clicking and dragging it around:

![5.1.2 B](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.2%20B%20drag.png)

6. Resize it by clicking and dragging the boxes on the edges:

![5.1.2 C](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.2%20C%20resize.png)

**``! Note``**
Your map may look a lot different, of course! This depends on how your own project is set up. But not to worry! These instructions are general, so they will work the same regardless of what the map itself looks like.

7. Be sure to leave margins along the edges, and a space along the top for the title.
8. Zoom in and out on the page (but not the map!) by using these buttons:

![Zoom full extent](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomFullExtent.png)
![Zoom in](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomIn.png)
![Zoom out](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionZoomOut.png)

9. Zoom and pan the map in the main QGIS window. You can also pan the map using the ![moveItemContent](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionMoveItemContent.png)**`Move item content`** tool.

The map view updates as you zoom in or zoom out.

10. If, for any reason, the map view does not refresh correctly, you can force the map to refresh by clicking the ![refresh](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionRefresh.png)**`Refresh view`** button.

Remember that the size and position you’ve given the map doesn’t need to be final. You can always come back and change it later if you’re not satisfied. For now, you need to ensure that you’ve saved your work on this map. Because a Print Layout in QGIS is part of the main map file, you must save your project.

11. Go to the **```Layout ‣```**![fileSave](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionFileSave.png)**```Save Project```**. This is a convenient shortcut to the one in the main dialog.

### 1.4.3. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Adding a Title
Now your map is looking good on the page, but your readers/users are not being told what’s going on yet. They need some context, which is what you’ll provide for them by adding map elements. First, let us add a title.

1. Click on the ![label](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionLabel.png)**`Add Label`** button
2. Click on the page, above the map, accept the suggested values in the **```New Item Properties```** dialog, and a label will appear at the top of the map.
3. Resize it and place it in the top center of the page. It can be resized and moved in the same way that you resized and moved the map.
As you move the title, you’ll notice that guidelines appear to help you position the title in the center of the page.
However, there is also a tool in the Actions Toolbar to help position the title relative to the map (not the page): 
![alignLeft](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignLeft.png)
4. Click the map to select it
5. Hold in _Shift_ on your keyboard and click on the label so that both the map and the label are selected.
6. Look for the ![alignLeft](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignLeft.png)**`Align selected items left`** button and click on the dropdown arrow next to it to reveal the positioning options and click ![alignHCenter](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAlignHCenter.png) **``Align center``**:

![5.1.3 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.3%20A%20%20align_center_dropdown.png)

Now the label frame is centered on the map, but not the contents. To center the contents of the label:

1. Select the label by clicking on it.
2. Click on the **``Item Properties``** tab in the side panel of the layout window.
3. Change the text of the label to “Almanzora”:

![5.1.3 B](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.3%20B%20Map_label_Almanzora.png)

4. Use this interface to set the font and alignment options under the **``Appearance``** section:
   1. Choose a large but sensible font (the example will use the font _`Arial`_ with a size of _`36`_)
   2. Set the **``Horizontal Alignment``** to **``Center``**.
   3. Set the **``Vertical Alignment``** to **``Middle``**.

You can also change the font color, but it’s probably best to keep it black as per the default.

5. The default setting is not to add a frame to the title’s text box. However, if you wish to add a frame, you can do so:
   1. In the **``Item Properties``** tab, scroll down until you see the **``Frame``** option.
   2. Click the **``Frame``** checkbox to enable the frame. You can also change the frame’s color and width.

In this example, we won’t enable the frame, so here is our page so far:

![5.1.3 C](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.3%20C%20Map_label_font.png)

To make sure that you don’t accidentally move these elements around now that you’ve aligned them, you can lock items into place:

1. Select both the label and the map items
2. Click the ![lockItems](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionLockItems.png) **`Lock Selected Items`** button in the Actions Toolbar.

**``! Note``**

Click the ![unlockAll](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionUnlockAll.png) **`Unlock All Items`** button in the **Actions Toolbar** to be able to edit the items again.

### 1.4.4. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Adding a Legend
The map reader also needs to be able to see what various things on the map actually mean. In some cases, like the place names, this is quite obvious. In other cases, it’s more difficult to guess, like the colors of the forests. Let’s add a new legend.

1. Click on the ![addLegend](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionAddLegend.png)**`Add Legend`** button
2. Click on the page to place the legend, accept the suggested values in the **``New Item Properties``** dialog,
3. A legend is added to the layout page, showing layers symbology as set in the main dialog.
4. As usual, you can click and move the item to where you want it:

![5.1.4 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.4%20A%20Legend.png)

### 1.4.5. ![moderate](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/moderate.png) Follow Along: Customizing Legend Items
As you noted the legend is now too large and covers the map. However, not everything on the legend is necessary, so let’s remove some unwanted items.

1. In the **``Item Properties tab``**, you’ll find the **``Legend items``** group.
2. Uncheck the ![unchecked](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/checkbox_unchecked.png) **``Auto update box``**, allowing you to directly modify the legend items
3. Select the entry with the **``roads``**
4. Delete it from the legend by clicking the ![signMinus](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbologyRemove.png) button.

You can do the same with items within a layer. Delete the entries **1** and **2** of _**L05_BA_Rivers**_ and the empty category.

5. Repeat this with all elements that are not visible within the map. You can also use an automatic function for that: Under the **``Legend items``** box, you will find a checkbox **``Only show items inside linked map``**. By enabling it, QGIS will automatically only show features of your current map section as legend items.

You can also rename items.

1. Select a layer from the same list.
2. Click the ![symbologyEdit](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/symbologyEdit.png)**`Edit selected item`** properties button.
3. Rename the layers to _**Roman city**_, _**Landuse Almanzora**_ and rename the remaining item in the layer _**L05_BA_Rivers**_ to _**River**_.

You can also hide layer and item names. Right click _**L05_BA_Rivers**_ and check **`Hidden`**. 

You can also reorder the items.

Since we have reoriented the map to fit the layout we need to add a north arrow. Click the ![north_arrow](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/north_arrow.png)**`Add North Arrow`**. drag a rectangle below the legend. Note that the north arrow is oriented correctly.

Similarly adding a scale bar is good practice. Add a scale bar below the north arrow. 

This is the result:

![5.1.5 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.5%20A%20Finalized.png)

### 1.4.6. ![basic](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/basic.png) Follow Along: Exporting Your Map
**``!Note``** Did you remember to save your work often?

Finally the map is ready for export! You’ll see the export buttons near the top left corner of the layout window:

* ![filePrint](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionFilePrint.png)**`Print Layout`**: interfaces with a printer. Since the printer options will differ depending on the model of printer that you’re working with, it’s probably better to consult the printer manual or a general guide to printing for more information on this topic.

The other buttons allow you to export the map page to a file.

* ![saveMapAsImage](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveMapAsImage.png)**`Export as Image`**: gives you a selection of various common image formats to choose from. This is probably the simplest option, but the image it creates is “dead” and difficult to edit.

* ![saveAsSVG](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsSVG.png)**`Export as SVG`**: If you’re sending the map to a cartographer (who may want to edit the map for publication), it’s best to export as an SVG. SVG stands for “Scalable Vector Graphic”, and can be imported to programs like [Inkscape](https://inkscape.org/) or other vector image editing software.

* ![saveAsPDF](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsPDF.png)**`Export as PDF`**: If you need to send the map to a client, it’s most common to use a PDF, because it’s easier to set up printing options for a PDF. Some cartographers may prefer PDF as well, if they have a program that allows them to import and edit this format.

For our purposes, we’re going to use PDF.

1. Click the ![saveAsPDF](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Icons/mActionSaveAsPDF.png)**`Export as PDF`** button
2. Choose a save location and a file name as usual. The following dialog will show up.

![5.1.6 A](https://github.com/Toletum-Network/AutumnSchool_2020/blob/master/Screenshots/5.1.6%20A%20layout_export_pdf.png)

3. You can safely use the default values now and click **``Save``**.

QGIS will proceed to the map export and push a message on top of the print layout dialog as soon as it finishes.

4. Click the hyperlink in the message to open the folder in which the PDF has been saved in your system’s file manager
5. Open it and see how your layout looks.

Everything is OK? Congratulations on your first completed QGIS map project!

6. Anything unsatisfying? Go back to the QGIS window, do the appropriate modifications and export again.
7. Remember to save your project file.


Now you know how to work with different types of data in a GIS project and prepare them for publication!

[Passar para a aula seguinte](https://github.com/Toletum-Network/QGIS_Classical_Studies/blob/master/M%C3%A9todos_espaciais_para_os_visigodos/2.%20Dados_geoespaciais_recolha_e_curadoria.md)
